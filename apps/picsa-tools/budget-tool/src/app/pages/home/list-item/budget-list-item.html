<mat-card appearance="raised" style="margin-bottom: 10px; padding: 16px; cursor: pointer">
  <div style="display: flex">
    <budget-card-image class="small" [card]="budget().meta.enterprise"></budget-card-image>
    <div style="flex: 1">
      <mat-card-title>{{ budget().meta.title }}</mat-card-title>
      <mat-card-content>{{ budget().meta.description }}</mat-card-content>
      <mat-card-subtitle>{{ budget()._created | date }}</mat-card-subtitle>
    </div>
    <budget-summary [budgetData]="budget().data" style="margin-bottom: 1.2rem; width: 150px"></budget-summary>
    <button mat-icon-button [matMenuTriggerFor]="budgetMenu" style="height: 70px; width: 50px"
      (click)="$event.stopPropagation()">
      <mat-icon>more_vert</mat-icon>
    </button>

    <mat-menu #budgetMenu="matMenu">
      <button mat-menu-item aria-label="Copy"
        (click)="showCopyDialog(dialogBase)"><mat-icon>content_copy</mat-icon>Copy</button>
      <button mat-menu-item aria-label="Edit"
        (click)="showRenameDialog(dialogBase)"><mat-icon>edit</mat-icon>Rename</button>
      <button mat-menu-item aria-label="Delete" color="light" (click)="deleteClicked.emit()">
        <mat-icon>delete</mat-icon>
        Delete
      </button>
    </mat-menu>
  </div>
</mat-card>

<!-- Copy/Rename Dialog -->
<ng-template #dialogBase>
  <mat-form-field>
    <mat-label>{{ 'title' | translate }}</mat-label>
    <input matInput [(ngModel)]="titleInput" />
  </mat-form-field>
  <mat-form-field>
    <mat-label>{{ 'description' | translate }}</mat-label>
    <textarea matInput [(ngModel)]="descriptionInput"></textarea>
  </mat-form-field>
  <div mat-dialog-actions>
    <button mat-button mat-dialog-close>Cancel</button>
    <button mat-button [mat-dialog-close]="true">Save</button>
  </div>
</ng-template>