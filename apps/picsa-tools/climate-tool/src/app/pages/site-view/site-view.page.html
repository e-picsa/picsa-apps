<div #optionsToggleButton (click)="snav.toggle()">
  <button mat-button>
    <span style="margin-right: 8px">
      <span *ngIf="snav.opened">{{'Hide Tool Options' | translate}}</span>
      <span *ngIf="!snav.opened">{{'Show Tool Options' | translate}}</span>
    </span>
    <mat-icon>menu</mat-icon>
  </button>
</div>

<div class="page-content">
  <mat-sidenav-container
    style="flex: 1"
    [style.marginTop.px]="mobileQuery.matches ? 56 : 0"
  >
    <!-- Options sidebar -->
    <!-- TODO - could be refactored to inject directly into app container instead of page -->
    <mat-sidenav
      #snav
      [mode]="mobileQuery.matches ? 'over' : 'side'"
      [fixedInViewport]="mobileQuery.matches"
      fixedTopGap="56"
      position="end"
      style="width: 300px"
      [opened]="true"
      (openedChange)="handleSidenavChange()"
    >
      <climate-chart-options style="padding: 8px"></climate-chart-options>
    </mat-sidenav>
    <!-- Main content -->
    <mat-sidenav-content class="page-content">
      <!-- export menu -->

      <!-- charts -->

      <div
        *ngIf="chartService.chartDefinition && chartService.station"
        style="flex: 1"
      >
        <climate-chart
          [definition]="chartService.chartDefinition"
          [data]="$any(chartService.station.summaries)"
        ></climate-chart>
      </div>

      <!-- reports -->
      <div *ngIf="activeView === 'cropAnalysis'" style="flex: 1">
        <climate-crop-analysis></climate-crop-analysis>
      </div>
      <!-- <climate-combined-probability></climate-combined-probability> -->
    </mat-sidenav-content>
  </mat-sidenav-container>
</div>

<picsa-animation
  name="rotate-phone"
  *ngIf="showRotateAnimation"
  [loops]="2"
  position="float"
  [delay]="2000"
></picsa-animation>
