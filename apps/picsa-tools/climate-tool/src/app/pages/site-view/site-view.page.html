<div #optionsToggleButton (click)="snav.toggle()">
  <button mat-button>
    <span style="margin-right: 8px">
      <span *ngIf="snav.opened">{{'Hide Tool Options' | translate}}</span>
      <span *ngIf="!snav.opened">{{'Show Tool Options' | translate}}</span>
    </span>
    <mat-icon>menu</mat-icon>
  </button>
</div>

<div class="page-content">
  <mat-sidenav-container
    style="flex: 1"
    [style.marginTop.px]="mobileQuery.matches ? 56 : 0"
  >
    <!-- Options sidebar -->
    <!-- TODO - could be refactored to inject directly into app container instead of page -->
    <mat-sidenav
      #snav
      [mode]="mobileQuery.matches ? 'over' : 'side'"
      [fixedInViewport]="mobileQuery.matches"
      position="end"
      style="width: 300px"
      [opened]="true"
      [fixedTopGap]="0"
      (openedChange)="handleSidenavChange()"
      (swipeRight)="snav.toggle()"
    >
      <button
        *ngIf="mobileQuery.matches"
        mat-icon-button
        (click)="snav.toggle()"
        class="sidenav-close-mobile"
      >
        <mat-icon color="primary">close</mat-icon>
      </button>
      <climate-chart-options style="padding: 8px"></climate-chart-options>
    </mat-sidenav>
    <!-- Main content -->
    <mat-sidenav-content>
      <div
        class="page-content"
        style="height: calc(100vh - 120px); overflow: auto"
      >
        <climate-chart-layout
          *ngIf="chartService.chartDefinition && chartService.station"
          style="flex: 1"
          [definition]="chartService.chartDefinition"
          [data]="$any(chartService.station.summaries)"
        ></climate-chart-layout>
      </div>

      <!-- reports -->
      <!-- <div *ngIf="activeView === 'cropAnalysis'" style="flex: 1">
        <climate-crop-analysis></climate-crop-analysis>
      </div> -->
      <!-- <climate-combined-probability></climate-combined-probability> -->
    </mat-sidenav-content>
  </mat-sidenav-container>
</div>

<picsa-animation
  name="rotate-phone"
  *ngIf="showRotateAnimation"
  [loops]="2"
  position="float"
  [delay]="2000"
></picsa-animation>
