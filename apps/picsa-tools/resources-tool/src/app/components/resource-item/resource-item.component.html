<mat-card
  appearance="raised"
  class="resource-card link"
  [attr.data-viewStyle]="viewStyle"
  (click)="handleResourceClick($event)"
  [attr.data-resourceType]="resource.type"
>
  <div class="resource-item-contents">
    <!-- Side Image -->
    <div *ngIf="resource.image" style="display: contents">
      <div *ngIf="viewStyle === 'expanded'; else imgDefault">
        <img [src]="resource.image" class="expanded-image" />
      </div>
      <ng-template #imgDefault>
        <div
          class="background-image"
          [style.background-image]="'url(' + resource.image + ')'"
          [attr.data-fit]="resource.imageFit"
        ></div>
      </ng-template>
    </div>

    <div class="resource-item-info">
      <!-- Header -->
      <mat-card-header>
        <mat-card-title style="margin-top: 12px">{{ resource.title | translate }}</mat-card-title>
        <mat-card-subtitle *ngIf="subtitle">
          {{ subtitle }}
        </mat-card-subtitle>
      </mat-card-header>
      <!-- Contents -->
      <mat-card-content class="resource-item-content">
        <p *ngIf="resource.description">
          {{ resource.description | translate }}
        </p>
        <div *ngIf="resource.language" style="margin-top: 2em">
          <span class="language-code">{{ resource.language.toUpperCase() }}</span>
        </div>
        <!-- Passed Content -->
        <ng-content></ng-content>
        <!-- Google play button -->
        <button mat-button class="action-button google-play" *ngIf="actionButton && actionButton.svgIcon">
          <mat-icon [svgIcon]="actionButton.icon"></mat-icon>
        </button>
      </mat-card-content>
    </div>
    <!-- Inline Action Button -->
    <button mat-button class="action-button" *ngIf="actionButton && !actionButton.svgIcon">
      <mat-icon color="primary">{{ actionButton.icon }}</mat-icon>
    </button>
    <!-- Download Progress -->
    <div class="download-progress" *ngIf="downloadProgress !== undefined">
      <mat-progress-spinner
        class="example-margin"
        color="accent"
        [mode]="downloadProgress > 0 ? 'determinate' : 'indeterminate'"
        [value]="downloadProgress"
        diameter="64"
      >
      </mat-progress-spinner>
      <button mat-button style="position: absolute; top: 12px">
        <mat-icon>close</mat-icon>
      </button>
    </div>
  </div>
</mat-card>
