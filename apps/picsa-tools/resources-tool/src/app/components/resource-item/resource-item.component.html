<mat-card
  class="resource-card"
  [attr.data-viewStyle]="viewStyle"
  (click)="handleResourceClick($event)"
  [attr.data-resourceType]="resource.type"
>
  <div class="resource-item-contents">
    <!-- Side Image -->
    <div *ngIf="resource.image" style="display: contents">
      <div *ngIf="viewStyle === 'expanded'; else imgDefault">
        <img [src]="resource.image" class="expanded-image" />
      </div>
      <ng-template #imgDefault>
        <div
          class="background-image"
          [style.background-image]="'url(' + resource.image + ')'"
          [attr.data-fit]="resource.imageFit"
        ></div>
      </ng-template>
    </div>

    <div style="flex: 2">
      <!-- Header -->
      <mat-card-header>
        <mat-card-title style="margin-top: 12px">{{
          resource.title | translate
        }}</mat-card-title>
        <mat-card-subtitle *ngIf="subtitle">
          {{ subtitle }}
        </mat-card-subtitle>
      </mat-card-header>
      <!-- Contents -->
      <mat-card-content style="margin-left: 16px">
        <p *ngIf="resource.description">
          {{ resource.description | translate }}
        </p>
        <div *ngIf="resource.language" style="margin-top: 2em">
          <span class="language-code">{{
            resource.language.toUpperCase()
          }}</span>
        </div>
        <!-- Passed Content -->
        <ng-content></ng-content>
      </mat-card-content>
    </div>
    <!-- Action Button -->
    <button mat-button class="action-button" *ngIf="actionButtonIcon">
      <mat-icon color="primary">{{ actionButtonIcon }}</mat-icon>
    </button>
    <!-- Download Progress -->
    <div class="download-progress" *ngIf="downloadProgress !== undefined">
      <mat-progress-spinner
        class="example-margin"
        color="accent"
        [mode]="downloadProgress > 0 ? 'determinate' : 'indeterminate'"
        [value]="downloadProgress"
        diameter="64"
      >
      </mat-progress-spinner>
      <button mat-button style="position: absolute; top: 12px">
        <mat-icon>close</mat-icon>
      </button>
    </div>
  </div>
</mat-card>
