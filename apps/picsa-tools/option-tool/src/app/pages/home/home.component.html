<div class="page-content" [class.HideOverflow]="matStepperOpen">
  <div style="overflow: auto; flex: 1">
    <table mat-table [dataSource]="dbDataDocs" class="mat-elevation-z8">
      <!--- Note that these columns can be defined in any order.
          The actual rendered columns are set as a property on the row definition" -->

      <!-- Practice Column -->
      <ng-container matColumnDef="practice">
        <th mat-header-cell *matHeaderCellDef>{{ 'Practice' | translate }}</th>
        <td mat-cell *matCellDef="let element">{{ element._data.practice | translate }}</td>
      </ng-container>

      <!-- gender decisions Column -->
      <ng-container matColumnDef="gender_decisions">
        <th mat-header-cell *matHeaderCellDef>{{ 'Who makes decisions' | translate }}</th>
        <td mat-cell *matCellDef="let element">
          <option-gender-input
            [ngModel]="element._data.gender_decisions"
            [options]="{ readonly: true }"
          ></option-gender-input>
        </td>
      </ng-container>

      <!-- gender activities Column -->
      <ng-container matColumnDef="gender_activities">
        <th mat-header-cell *matHeaderCellDef>{{ 'Who does activity' | translate }}</th>
        <td mat-cell *matCellDef="let element">
          <option-gender-input
            [ngModel]="element._data.gender_activities"
            [options]="{ readonly: true }"
          ></option-gender-input>
        </td>
      </ng-container>

      <!-- Benefits Column -->
      <ng-container matColumnDef="benefits">
        <th mat-header-cell *matHeaderCellDef>{{ 'Benefits and who' | translate }}</th>
        <td mat-cell *matCellDef="let element">
          <div *ngFor="let benefit of element._data.benefits; index as i" style="display: flex">
            <div style="flex: 1">{{ benefit.benefit }}</div>
            <option-gender-input [ngModel]="benefit.beneficiary" [options]="{ readonly: true }"></option-gender-input>
          </div>
        </td>
      </ng-container>

      <!-- Performance Column -->
      <ng-container matColumnDef="performance">
        <th mat-header-cell *matHeaderCellDef>
          {{ 'Performance' | translate }}
        </th>
        <td mat-cell *matCellDef="let element" class="split-values">
          <div>
            <option-performance-input
              [options]="{ readonly: true }"
              [ngModel]="element._data.performance.lowRf"
            ></option-performance-input>
            <option-performance-input
              [options]="{ readonly: true }"
              [ngModel]="element._data.performance.midRf"
            ></option-performance-input>
            <option-performance-input
              [options]="{ readonly: true }"
              [ngModel]="element._data.performance.highRf"
            ></option-performance-input>
          </div>
        </td>
      </ng-container>

      <!-- Investment Column -->
      <ng-container matColumnDef="investment">
        <th mat-header-cell *matHeaderCellDef>{{ 'Investment' | translate }}</th>
        <td mat-cell *matCellDef="let element">
          <!-- <div
            style="
              display: flex;
              flex-direction: row;
              padding: 4px;
              max-width: 14rem;
              justify-content: space-between;
              align-items: flex-start;
            "
          >
            <div class="performance-container">
              <mat-icon style="color: #8a2644; font-size: 20px">payments</mat-icon>
              <mat-icon
                *ngIf="element._data.investment.money === 'low'"
                svgIcon="picsa_options_thumbs_up"
                class="emoji_size"
              ></mat-icon>
              <mat-icon
                *ngIf="element._data.investment.money === 'mid'"
                svgIcon="picsa_options_fist_bump"
                class="emoji_size"
              ></mat-icon>
              <mat-icon
                *ngIf="element._data.investment.money === 'high'"
                svgIcon="picsa_options_thumbs_down"
                class="emoji_size"
              ></mat-icon>
              <div class="weatherValue">{{ element._data.investment.money | translate }}</div>
            </div>
            <div class="vertical-line"></div>
            <div class="performance-container">
              <mat-icon style="color: #8a2644; font-size: 20px">schedule</mat-icon>
              <mat-icon
                *ngIf="element._data.investment.time === 'low'"
                svgIcon="picsa_options_thumbs_up"
                class="emoji_size"
              ></mat-icon>
              <mat-icon
                *ngIf="element._data.investment.time === 'mid'"
                svgIcon="picsa_options_fist_bump"
                class="emoji_size"
              ></mat-icon>
              <mat-icon
                *ngIf="element._data.investment.time === 'high'"
                svgIcon="picsa_options_thumbs_down"
                class="emoji_size"
              ></mat-icon>
              <div class="weatherValue">{{ element._data.investment.time | translate }}</div>
            </div>
          </div> -->
        </td>
      </ng-container>

      <!-- Time Column -->
      <ng-container matColumnDef="time">
        <th mat-header-cell *matHeaderCellDef>{{ 'Time' | translate }}</th>
        <td mat-cell style="text-align: center" *matCellDef="let element">{{ element._data.time | translate }}</td>
      </ng-container>

      <!-- Risks Column -->
      <ng-container matColumnDef="risk">
        <th mat-header-cell *matHeaderCellDef>{{ 'Risks' | translate }}</th>
        <td mat-cell *matCellDef="let element">{{ element._data.risk | translate }}</td>
      </ng-container>

      <!-- Sub Headers 
        Templates for any required subheaders as defined in component ts (fallback to default)
        adapted from https://stackoverflow.com/q/56724439
      -->
      <ng-container matColumnDef="performance_subheader">
        <th mat-header-cell *matHeaderCellDef class="split-values subheader">
          <div class="performance-subheader">
            <mat-icon svgIcon="picsa_options_rain_low_label"></mat-icon>
            <mat-icon svgIcon="picsa_options_rain_medium_label"></mat-icon>
            <mat-icon svgIcon="picsa_options_rain_high_label"></mat-icon>
          </div>
        </th>
      </ng-container>
      <ng-container matColumnDef="investment_subheader">
        <th mat-header-cell *matHeaderCellDef class="split-values subheader">
          <div>
            <mat-icon>payments</mat-icon>
            <mat-icon>schedule</mat-icon>
          </div>
        </th>
      </ng-container>
      <ng-container matColumnDef="default_subheader"><th *matHeaderCellDef class="subheader"></th></ng-container>

      <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
      <tr mat-header-row *matHeaderRowDef="subheaderColumns" id="subheaderRow"></tr>
      <tr mat-row *matRowDef="let row; index as i; columns: displayedColumns" (click)="onRowClicked(row, i)"></tr>
    </table>
  </div>
  <div class="sticky-footer">
    <button class="footer-button" (click)="openNewDialog()" mat-button mat-raised-button color="primary">
      <mat-icon>add</mat-icon>
      {{ 'Add New Option' | translate }}
    </button>
  </div>
  <div class="editor-popup slide-in" [class.active]="matStepperOpen">
    <div class="blurBackground"></div>
    <div class="editor-container">
      <option-editor (dataTransfer)="onDataTransfer($event)" style="width: 100%"></option-editor>
    </div>
  </div>
</div>
