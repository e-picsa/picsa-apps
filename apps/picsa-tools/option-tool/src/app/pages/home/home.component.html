<div class="HomeContainer" [class.HideOverflow]="matStepperOpen">
  <div>
    <table mat-table [dataSource]="dbDataDocs" class="mat-elevation-z8">
      <!--- Note that these columns can be defined in any order.
          The actual rendered columns are set as a property on the row definition" -->

      <!-- Practice Column -->
      <ng-container matColumnDef="practice">
        <th mat-header-cell *matHeaderCellDef>{{ 'Practice' | translate }}</th>
        <td mat-cell *matCellDef="let element">{{ element._data.practice | translate }}</td>
      </ng-container>

      <!-- gender decisions Column -->
      <ng-container matColumnDef="gender_decisions">
        <th mat-header-cell *matHeaderCellDef>{{ 'Who makes decisions' | translate }}</th>
        <td mat-cell *matCellDef="let element">
          <picsa-gender-icon
            *ngFor="let gender of element._data.gender_decisions"
            [gender]="gender"
          ></picsa-gender-icon>
        </td>
      </ng-container>

      <!-- gender activities Column -->
      <ng-container matColumnDef="gender_activities">
        <th mat-header-cell *matHeaderCellDef>{{ 'Who does activity' | translate }}</th>
        <td mat-cell *matCellDef="let element">
          <picsa-gender-icon
            *ngFor="let gender of element._data.gender_activities"
            [gender]="gender"
          ></picsa-gender-icon>
        </td>
      </ng-container>

      <!-- Benefits Column -->
      <ng-container matColumnDef="benefits">
        <th mat-header-cell *matHeaderCellDef>{{ 'Benefits and who' | translate }}</th>
        <td mat-cell *matCellDef="let element">
          <div *ngFor="let benefit of element._data.benefits; index as i" class="benefit-container">
            <div style="flex: 1">{{ benefit.benefit }}</div>
            <div style="display: flex; width: 50px">
              <!-- HACK add placeholder for both female and male to align, but hide if not used -->
              <picsa-gender-icon
                gender="female"
                [showLabel]="false"
                [style.visibility]="benefit.beneficiary.includes('female') ? 'visible' : 'hidden'"
              ></picsa-gender-icon>

              <picsa-gender-icon
                gender="male"
                [showLabel]="false"
                [style.visibility]="benefit.beneficiary.includes('male') ? 'visible' : 'hidden'"
              ></picsa-gender-icon>
            </div>
          </div>
        </td>
      </ng-container>

      <!-- Performance Column -->
      <ng-container matColumnDef="performance">
        <th mat-header-cell *matHeaderCellDef>{{ 'Performance' | translate }}</th>
        <td mat-cell *matCellDef="let element">
          <div style="display: flex; flex-direction: column; gap: 3px">
            <div>{{ 'High RF' | translate }}: {{ element._data.performance.highRf | translate }}</div>
            <div>{{ 'Mid RF' | translate }}: {{ element._data.performance.midRf | translate }}</div>
            <div>{{ 'Low RF' | translate }} : {{ element._data.performance.lowRf | translate }}</div>
          </div>
        </td>
      </ng-container>

      <!-- Investment Column -->
      <ng-container matColumnDef="investment">
        <th mat-header-cell *matHeaderCellDef>{{ 'Investment' | translate }}</th>
        <td mat-cell *matCellDef="let element">
          <div>
            <mat-icon>payments</mat-icon>
            <span style="margin-left: 8px">{{ element._data.investment.money | translate }}</span>
          </div>

          <div style="margin-top: 1rem">
            <mat-icon>schedule</mat-icon>
            <span style="margin-left: 8px">{{ element._data.investment.time | translate }}</span>
          </div>
        </td>
      </ng-container>

      <!-- Time Column -->
      <ng-container matColumnDef="time">
        <th mat-header-cell *matHeaderCellDef>{{ 'Time' | translate }}</th>
        <td mat-cell *matCellDef="let element">{{ element._data.time | translate }}</td>
      </ng-container>

      <!-- Risks Column -->
      <ng-container matColumnDef="risk">
        <th mat-header-cell *matHeaderCellDef>{{ 'Risks' | translate }}</th>
        <td mat-cell *matCellDef="let element">{{ element._data.risk | translate }}</td>
      </ng-container>

      <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
      <tr mat-row *matRowDef="let row; index as i; columns: displayedColumns" (click)="onRowClicked(row, i)"></tr>
    </table>
    <button (click)="openNewDialog()" mat-button mat-raised-button color="primary">
      {{ 'Add New Option' | translate }}
    </button>
  </div>
  <div class="slide-in container" [class.active]="matStepperOpen">
    <div>
      <option-editor (dataTransfer)="onDataTransfer($event)"></option-editor>
    </div>
  </div>
  <div *ngIf="matStepperOpen"  class="blurBackground"></div>
</div>
