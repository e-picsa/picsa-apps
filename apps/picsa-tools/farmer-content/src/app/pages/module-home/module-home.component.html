<div class="page-content">
  @if(content(); as content){
  <div @fadeInOut class="content-container">
    <div class="module-content">
      @for(step of content.steps; track $index){
      @if (selectedIndex() === $index) {
      <div class="tab-content" [attr.data-tool-content]="toolTabIndex() === $index">
        @for(block of step; track $index){ @switch (block.type) {

        @case ('text') { @if(block.title){
        <h2 class="px-4">{{ block.title | translate }}</h2>
        } @if(block.text) {
        <p class="px-4">{{ block.text | translate }}</p>
        } }
        @case('video'){
        <farmer-step-video [videoData]="block.video"></farmer-step-video>
        }

        @case ('review') { @if(photoAlbum(); as album){
        <h2>{{ 'Review' | translate }}</h2>
        <picsa-photo-list [album]="album"></picsa-photo-list>
        <picsa-photo-input [album]="album" style="margin-top: 2rem"></picsa-photo-input>
        } }

        @case ('tool') {
        <div class="page tool-route" [attr.data-has-header]="block.tool.showHeader ? true : undefined">
          <router-outlet #toolRouter></router-outlet>
        </div>
        } } }
      </div>
      }
      }
    </div>
  </div>

  <farmer-module-footer
    [totalSections]="tabs().length"
    [selectedIndex]="selectedIndex()"
    (selectedIndexChange)="updateSelectedIndex($event)"
    [sections]="sections()"
  ></farmer-module-footer>

  }
</div>